(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

/**
 * CONTACT FORM HANDLER
 * Handles contact form
 */
var contactContainer = document.getElementById('contactContainer');
var contactButton = document.getElementById('contactButton');
var contactOverlay = document.getElementById('contactOverlay');
var contactContainerClassName = contactContainer.classList[0];
var contactContainerClassNameActive = "".concat(contactContainerClassName, "-active");
var contactContainerClassNameDisabled = "".concat(contactContainerClassName, "-disabled");
var contactInputName = document.getElementById('contactName');
var contactInputEmail = document.getElementById('contactEmail');
var contactActive = false;

function openContact() {
  if (!contactActive) {
    contactContainer.classList.add(contactContainerClassNameActive);
    contactContainer.classList.remove(contactContainerClassNameDisabled);
    contactActive = true;
  } else {
    closeContact();
  }
}

function closeContact() {
  contactContainer.classList.add(contactContainerClassNameDisabled);
  contactContainer.classList.remove(contactContainerClassNameActive);
  contactInputName.value = '';
  contactInputEmail.value = '';
  contactActive = false;
}

contactButton.addEventListener('click', function () {
  openContact();
});
contactOverlay.addEventListener('click', function () {
  openContact();
});

},{}],2:[function(require,module,exports){
"use strict";

var _splash = require("./splash");

/**
 * CONSTANTS
 * Set CONSTANTS
 */
var INSTRUMENTS_LIB = {
  instruments: ['violin', 'trumpet', 'keyboard', 'piano', 'sax', 'acoustic-guitar', 'electric-guitar', 'disco']
};
var CYCLE_DIRECTIONS = {
  left: 'left',
  right: 'right'
};
var BASE_IMAGE = './images/instruments/';
var BASE_SOUND = './music/';
/**
 * INSTRUMENT PLAYER HANDLER
 * Handles playing and stopping intsruments
 */

var instrumentNumber = 0;
var instrumentActive = false;
var oldInstrumentClass = null;
var instrumentAudio = document.getElementById('instrumentAudio');
var instrumentIcon = document.getElementById('instrumentIcon');
var instrumentBackground = 'ti-Content';
var instrumentPlaying = 'ti-Content-instrument-playing';

var setContent = function setContent() {
  instrumentIcon.style.backgroundImage = "url(".concat(BASE_IMAGE).concat(INSTRUMENTS_LIB.instruments[instrumentNumber], ".svg)");
  instrumentAudio.src = "".concat(BASE_SOUND).concat(INSTRUMENTS_LIB.instruments[instrumentNumber], ".mp3");
  var newInstrumentClass = "".concat(instrumentBackground, "-").concat(INSTRUMENTS_LIB.instruments[instrumentNumber]);
  oldInstrumentClass ? instrumentIcon.parentElement.classList.replace(oldInstrumentClass, newInstrumentClass) : instrumentIcon.parentElement.classList.add(oldInstrumentClass, newInstrumentClass);
  oldInstrumentClass = newInstrumentClass;
};

var stopInstrument = function stopInstrument() {
  instrumentActive = false;
  instrumentIcon.classList.remove(instrumentPlaying);
  instrumentAudio.pause();
  instrumentAudio.currentTime = 0;
};

var startInstrument = function startInstrument() {
  if (!instrumentActive) {
    instrumentIcon.classList.add(instrumentPlaying);
    instrumentAudio.loop = true;
    instrumentAudio.play();
    instrumentActive = !instrumentActive;
  } else {
    stopInstrument();
  }
};

instrumentIcon.addEventListener('click', startInstrument);
/**
 * CYCLE HANDLER
 * Handles cycling through intsruments
 */

var BUTTON_LEFT = document.getElementById('arrow-left');
var BUTTON_RIGHT = document.getElementById('arrow-right');

var cycleInstruments = function cycleInstruments() {
  var direction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : CYCLE_DIRECTIONS.left;
  stopInstrument();

  if (direction === CYCLE_DIRECTIONS.left) {
    if (instrumentNumber <= 0) {
      instrumentNumber = INSTRUMENTS_LIB.instruments.length - 1;
    } else {
      instrumentNumber--;
    }
  } else {
    if (instrumentNumber >= INSTRUMENTS_LIB.instruments.length - 1) {
      instrumentNumber = 0;
    } else {
      instrumentNumber++;
    }
  }

  setContent();
};

BUTTON_LEFT.addEventListener('click', function () {
  return cycleInstruments(CYCLE_DIRECTIONS.left);
});
BUTTON_RIGHT.addEventListener('click', function () {
  return cycleInstruments(CYCLE_DIRECTIONS.right);
});
/**
* KEYBOARD CONTROL HANDLER
* Handles keyboard controls for play/stop and navigation 
*/

window.addEventListener("keydown", function (e) {
  if (e.keyCode === 32) {
    if (_splash.splashScreenActive) {
      (0, _splash.handleSplashScreen)();
    } else {
      startInstrument();
    }

    ;
  }

  if (e.keyCode === 37) {
    cycleInstruments(CYCLE_DIRECTIONS.left);
  }

  if (e.keyCode === 39) {
    cycleInstruments(CYCLE_DIRECTIONS.right);
  }
});
/**
 * INIT
 * Initialize the app
 */

document.addEventListener('onload', setContent());

},{"./splash":3}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.handleSplashScreen = exports.splashScreenActive = void 0;

/**
 * SPLASH SCREEN HANDLER
 * Handles splash screen on app init
 */
var splashScreen = document.getElementById('splashScreen');
var splashScreenClassName = splashScreen.classList[0];
var splashButton = document.getElementById('splashButton');
var splashScreenActive = true;
exports.splashScreenActive = splashScreenActive;

var handleSplashScreen = function handleSplashScreen() {
  splashScreen.classList.add("".concat(splashScreenClassName, "-hidden"));
  setTimeout(function () {
    splashScreen.remove();
    exports.splashScreenActive = splashScreenActive = false;
  }, 4000);
};

exports.handleSplashScreen = handleSplashScreen;
splashButton.addEventListener('click', handleSplashScreen);

},{}],4:[function(require,module,exports){
"use strict";

/**
 * CONTACT FORM HANDLER
 * Handles subscribe form
 */
var subscribeContainer = document.getElementById('subscribeContainer');
var subscribeButton = document.getElementById('subscribeButton');
var subscribeOverlay = document.getElementById('subscribeOverlay');
var subscribeContainerClassName = subscribeContainer.classList[0];
var subscribeContainerClassNameActive = "".concat(subscribeContainerClassName, "-active");
var subscribeContainerClassNameDisabled = "".concat(subscribeContainerClassName, "-disabled");
var subscribeInputEmail = document.getElementById('mce-EMAIL');
var subscribeActive = false;

function openSubscribe() {
  if (!subscribeActive) {
    subscribeContainer.classList.add(subscribeContainerClassNameActive);
    subscribeContainer.classList.remove(subscribeContainerClassNameDisabled);
    subscribeActive = true;
  } else {
    closeSubscribe();
  }
}

function closeSubscribe() {
  subscribeContainer.classList.add(subscribeContainerClassNameDisabled);
  subscribeContainer.classList.remove(subscribeContainerClassNameActive);
  subscribeInputEmail.value = '';
  subscribeActive = false;
}

subscribeButton.addEventListener('click', function () {
  openSubscribe();
});
subscribeOverlay.addEventListener('click', function () {
  openSubscribe();
});

},{}]},{},[2,3,1,4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvanMvY29udGFjdC5qcyIsImFwcC9qcy9tYWluLmpzIiwiYXBwL2pzL3NwbGFzaC5qcyIsImFwcC9qcy9zdWJzY3JpYmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBS0EsSUFBTSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsY0FBVCxDQUF3QixrQkFBeEIsQ0FBekI7QUFDQSxJQUFNLGFBQWEsR0FBRyxRQUFRLENBQUMsY0FBVCxDQUF3QixlQUF4QixDQUF0QjtBQUNBLElBQU0sY0FBYyxHQUFHLFFBQVEsQ0FBQyxjQUFULENBQXdCLGdCQUF4QixDQUF2QjtBQUVBLElBQU0seUJBQXlCLEdBQUcsZ0JBQWdCLENBQUMsU0FBakIsQ0FBMkIsQ0FBM0IsQ0FBbEM7QUFDQSxJQUFNLCtCQUErQixhQUFNLHlCQUFOLFlBQXJDO0FBQ0EsSUFBTSxpQ0FBaUMsYUFBTSx5QkFBTixjQUF2QztBQUVBLElBQU0sZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsYUFBeEIsQ0FBekI7QUFDQSxJQUFNLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxjQUFULENBQXdCLGNBQXhCLENBQTFCO0FBRUEsSUFBSSxhQUFhLEdBQUcsS0FBcEI7O0FBRUEsU0FBUyxXQUFULEdBQXVCO0FBQ3RCLE1BQUcsQ0FBQyxhQUFKLEVBQW1CO0FBQ2xCLElBQUEsZ0JBQWdCLENBQUMsU0FBakIsQ0FBMkIsR0FBM0IsQ0FBK0IsK0JBQS9CO0FBQ0EsSUFBQSxnQkFBZ0IsQ0FBQyxTQUFqQixDQUEyQixNQUEzQixDQUFrQyxpQ0FBbEM7QUFDQSxJQUFBLGFBQWEsR0FBRyxJQUFoQjtBQUNBLEdBSkQsTUFLSztBQUNKLElBQUEsWUFBWTtBQUNaO0FBQ0Q7O0FBRUQsU0FBUyxZQUFULEdBQXdCO0FBQ3ZCLEVBQUEsZ0JBQWdCLENBQUMsU0FBakIsQ0FBMkIsR0FBM0IsQ0FBK0IsaUNB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b290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qKlxyXG4gKiBDT05UQUNUIEZPUk0gSEFORExFUlxyXG4gKiBIYW5kbGVzIGNvbnRhY3QgZm9ybVxyXG4gKi9cclxuXHJcbmNvbnN0IGNvbnRhY3RDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFjdENvbnRhaW5lcicpO1xyXG5jb25zdCBjb250YWN0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhY3RCdXR0b24nKTtcclxuY29uc3QgY29udGFjdE92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFjdE92ZXJsYXknKTtcclxuXHJcbmNvbnN0IGNvbnRhY3RDb250YWluZXJDbGFzc05hbWUgPSBjb250YWN0Q29udGFpbmVyLmNsYXNzTGlzdFswXTtcclxuY29uc3QgY29udGFjdENvbnRhaW5lckNsYXNzTmFtZUFjdGl2ZSA9IGAke2NvbnRhY3RDb250YWluZXJDbGFzc05hbWV9LWFjdGl2ZWBcclxuY29uc3QgY29udGFjdENvbnRhaW5lckNsYXNzTmFtZURpc2FibGVkID0gYCR7Y29udGFjdENvbnRhaW5lckNsYXNzTmFtZX0tZGlzYWJsZWRgO1xyXG5cclxuY29uc3QgY29udGFjdElucHV0TmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWN0TmFtZScpO1xyXG5jb25zdCBjb250YWN0SW5wdXRFbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWN0RW1haWwnKTtcclxuXHJcbmxldCBjb250YWN0QWN0aXZlID0gZmFsc2U7XHJcblxyXG5mdW5jdGlvbiBvcGVuQ29udGFjdCgpIHtcclxuXHRpZighY29udGFjdEFjdGl2ZSkge1xyXG5cdFx0Y29udGFjdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGNvbnRhY3RDb250YWluZXJDbGFzc05hbWVBY3RpdmUpO1xyXG5cdFx0Y29udGFjdENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKGNvbnRhY3RDb250YWluZXJDbGFzc05hbWVEaXNhYmxlZCk7XHJcblx0XHRjb250YWN0QWN0aXZlID0gdHJ1ZTtcclxuXHR9XHJcblx0ZWxzZSB7XHJcblx0XHRjbG9zZUNvbnRhY3QoKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlQ29udGFjdCgpIHtcclxuXHRjb250YWN0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY29udGFjdENvbnRhaW5lckNsYXNzTmFtZURpc2FibGVkKTtcclxuXHRjb250YWN0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoY29udGFjdENvbnRhaW5lckNsYXNzTmFtZUFjdGl2ZSk7XHJcblx0Y29udGFjdElucHV0TmFtZS52YWx1ZSA9ICcnO1xyXG5cdGNvbnRhY3RJbnB1dEVtYWlsLnZhbHVlID0gJyc7XHJcblx0Y29udGFjdEFjdGl2ZSA9IGZhbHNlO1xyXG59XHJcblxyXG5jb250YWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdG9wZW5Db250YWN0KCk7XHJcbn0pO1xyXG5cclxuY29udGFjdE92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0b3BlbkNvbnRhY3QoKTtcclxufSk7XHJcbiIsIi8qKlxyXG4gKiBDT05TVEFOVFNcclxuICogU2V0IENPTlNUQU5UU1xyXG4gKi9cclxuXHJcbmNvbnN0IElOU1RSVU1FTlRTX0xJQiA9IHtcclxuXHRpbnN0cnVtZW50czogW1xyXG5cdFx0J3Zpb2xpbicsXHJcblx0XHQndHJ1bXBldCcsXHJcblx0XHQna2V5Ym9hcmQnLFxyXG5cdFx0J3BpYW5vJyxcclxuXHRcdCdzYXgnLFxyXG5cdFx0J2Fjb3VzdGljLWd1aXRhcicsXHJcblx0XHQnZWxlY3RyaWMtZ3VpdGFyJyxcclxuXHRcdCdkaXNjbycsXHJcblx0XSxcclxufTtcclxuXHJcbmNvbnN0IENZQ0xFX0RJUkVDVElPTlMgPSB7XHJcblx0bGVmdDogJ2xlZnQnLFxyXG5cdHJpZ2h0OiAncmlnaHQnLFxyXG59O1xyXG5cclxuY29uc3QgQkFTRV9JTUFHRSA9ICcuL2ltYWdlcy9pbnN0cnVtZW50cy8nO1xyXG5jb25zdCBCQVNFX1NPVU5EID0gJy4vbXVzaWMvJztcclxuXHJcbi8qKlxyXG4gKiBJTlNUUlVNRU5UIFBMQVlFUiBIQU5ETEVSXHJcbiAqIEhhbmRsZXMgcGxheWluZyBhbmQgc3RvcHBpbmcgaW50c3J1bWVudHNcclxuICovXHJcblxyXG5sZXQgaW5zdHJ1bWVudE51bWJlciA9IDA7XHJcbmxldCBpbnN0cnVtZW50QWN0aXZlID0gZmFsc2U7XHJcbmxldCBvbGRJbnN0cnVtZW50Q2xhc3MgPSBudWxsO1xyXG5jb25zdCBpbnN0cnVtZW50QXVkaW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdHJ1bWVudEF1ZGlvJyk7XHJcbmNvbnN0IGluc3RydW1lbnRJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3RydW1lbnRJY29uJyk7XHJcblxyXG5jb25zdCBpbnN0cnVtZW50QmFja2dyb3VuZCA9ICd0aS1Db250ZW50JztcclxuY29uc3QgaW5zdHJ1bWVudFBsYXlpbmcgPSAndGktQ29udGVudC1pbnN0cnVtZW50LXBsYXlpbmcnO1xyXG5cclxuY29uc3Qgc2V0Q29udGVudCA9ICgpID0+IHtcclxuXHRpbnN0cnVtZW50SWNvbi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7QkFTRV9JTUFHRX0ke1xyXG5cdFx0SU5TVFJVTUVOVFNfTElCLmluc3RydW1lbnRzW2luc3RydW1lbnROdW1iZXJdXHJcblx0fS5zdmcpYDtcclxuXHJcblx0aW5zdHJ1bWVudEF1ZGlvLnNyYyA9IGAke0JBU0VfU09VTkR9JHtcclxuXHRcdElOU1RSVU1FTlRTX0xJQi5pbnN0cnVtZW50c1tpbnN0cnVtZW50TnVtYmVyXVxyXG5cdH0ubXAzYDtcclxuXHJcblx0bGV0IG5ld0luc3RydW1lbnRDbGFzcyA9IGAke2luc3RydW1lbnRCYWNrZ3JvdW5kfS0ke0lOU1RSVU1FTlRTX0xJQi5pbnN0cnVtZW50c1tpbnN0cnVtZW50TnVtYmVyXX1gO1xyXG5cdG9sZEluc3RydW1lbnRDbGFzc1xyXG5cdFx0PyBpbnN0cnVtZW50SWNvbi5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZXBsYWNlKG9sZEluc3RydW1lbnRDbGFzcyxuZXdJbnN0cnVtZW50Q2xhc3MpXHJcblx0XHQ6IGluc3RydW1lbnRJY29uLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChvbGRJbnN0cnVtZW50Q2xhc3MsbmV3SW5zdHJ1bWVudENsYXNzKTtcclxuXHRvbGRJbnN0cnVtZW50Q2xhc3MgPSBuZXdJbnN0cnVtZW50Q2xhc3M7XHJcbn07XHJcblxyXG5jb25zdCBzdG9wSW5zdHJ1bWVudCA9ICgpID0+IHtcclxuXHRpbnN0cnVtZW50QWN0aXZlID0gZmFsc2U7XHJcblx0aW5zdHJ1bWVudEljb24uY2xhc3NMaXN0LnJlbW92ZShpbnN0cnVtZW50UGxheWluZyk7XHJcblx0aW5zdHJ1bWVudEF1ZGlvLnBhdXNlKCk7XHJcblx0aW5zdHJ1bWVudEF1ZGlvLmN1cnJlbnRUaW1lID0gMDtcclxufTtcclxuXHJcbmNvbnN0IHN0YXJ0SW5zdHJ1bWVudCA9ICgpID0+IHtcclxuXHRpZiAoIWluc3RydW1lbnRBY3RpdmUpIHtcclxuXHRcdGluc3RydW1lbnRJY29uLmNsYXNzTGlzdC5hZGQoaW5zdHJ1bWVudFBsYXlpbmcpO1xyXG5cdFx0aW5zdHJ1bWVudEF1ZGlvLmxvb3AgPSB0cnVlO1xyXG5cdFx0aW5zdHJ1bWVudEF1ZGlvLnBsYXkoKTtcclxuXHRcdGluc3RydW1lbnRBY3RpdmUgPSAhaW5zdHJ1bWVudEFjdGl2ZTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0c3RvcEluc3RydW1lbnQoKTtcclxuXHR9XHJcbn07XHJcblxyXG5pbnN0cnVtZW50SWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0SW5zdHJ1bWVudCk7XHJcblxyXG4vKipcclxuICogQ1lDTEUgSEFORExFUlxyXG4gKiBIYW5kbGVzIGN5Y2xpbmcgdGhyb3VnaCBpbnRzcnVtZW50c1xyXG4gKi9cclxuXHJcbmNvbnN0IEJVVFRPTl9MRUZUID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fycm93LWxlZnQnKTtcclxuY29uc3QgQlVUVE9OX1JJR0hUID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fycm93LXJpZ2h0Jyk7XHJcblxyXG5jb25zdCBjeWNsZUluc3RydW1lbnRzID0gKGRpcmVjdGlvbiA9IENZQ0xFX0RJUkVDVElPTlMubGVmdCkgPT4ge1xyXG5cdHN0b3BJbnN0cnVtZW50KCk7XHJcblxyXG5cdGlmIChkaXJlY3Rpb24gPT09IENZQ0xFX0RJUkVDVElPTlMubGVmdCkge1xyXG5cdFx0aWYgKGluc3RydW1lbnROdW1iZXIgPD0gMCkge1xyXG5cdFx0XHRpbnN0cnVtZW50TnVtYmVyID0gSU5TVFJVTUVOVFNfTElCLmluc3RydW1lbnRzLmxlbmd0aCAtIDE7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpbnN0cnVtZW50TnVtYmVyLS07XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdGlmIChpbnN0cnVtZW50TnVtYmVyID49IElOU1RSVU1FTlRTX0xJQi5pbnN0cnVtZW50cy5sZW5ndGggLSAxKSB7XHJcblx0XHRcdGluc3RydW1lbnROdW1iZXIgPSAwO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aW5zdHJ1bWVudE51bWJlcisrO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c2V0Q29udGVudCgpO1xyXG59O1xyXG5cclxuQlVUVE9OX0xFRlQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PlxyXG5cdGN5Y2xlSW5zdHJ1bWVudHMoQ1lDTEVfRElSRUNUSU9OUy5sZWZ0KVxyXG4pO1xyXG5cclxuQlVUVE9OX1JJR0hULmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT5cclxuXHRjeWNsZUluc3RydW1lbnRzKENZQ0xFX0RJUkVDVElPTlMucmlnaHQpXHJcbik7XHJcblxyXG4gIC8qKlxyXG5cdCAqIEtFWUJPQVJEIENPTlRST0wgSEFORExFUlxyXG5cdCAqIEhhbmRsZXMga2V5Ym9hcmQgY29udHJvbHMgZm9yIHBsYXkvc3RvcCBhbmQgbmF2aWdhdGlvbiBcclxuXHQgKi9cclxuaW1wb3J0IHsgc3BsYXNoU2NyZWVuQWN0aXZlLCBoYW5kbGVTcGxhc2hTY3JlZW4gfSBmcm9tIFwiLi9zcGxhc2hcIjtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG5cdGlmIChlLmtleUNvZGUgPT09IDMyKSB7XHRcdFxyXG5cdFx0aWYoc3BsYXNoU2NyZWVuQWN0aXZlKSB7XHJcblx0XHRcdGhhbmRsZVNwbGFzaFNjcmVlbigpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c3RhcnRJbnN0cnVtZW50KCk7XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0aWYgKGUua2V5Q29kZSA9PT0gMzcpIHtcclxuXHRcdGN5Y2xlSW5zdHJ1bWVudHMoQ1lDTEVfRElSRUNUSU9OUy5sZWZ0KTtcclxuXHR9XHJcblxyXG5cdGlmIChlLmtleUNvZGUgPT09IDM5KSB7XHJcblx0XHRjeWNsZUluc3RydW1lbnRzKENZQ0xFX0RJUkVDVElPTlMucmlnaHQpO1xyXG5cdH1cclxufSk7XHJcblxyXG4vKipcclxuICogSU5JVFxyXG4gKiBJbml0aWFsaXplIHRoZSBhcHBcclxuICovXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdvbmxvYWQnLCBzZXRDb250ZW50KCkpO1xyXG4iLCIvKipcclxuICogU1BMQVNIIFNDUkVFTiBIQU5ETEVSXHJcbiAqIEhhbmRsZXMgc3BsYXNoIHNjcmVlbiBvbiBhcHAgaW5pdFxyXG4gKi9cclxuXHJcbmNvbnN0IHNwbGFzaFNjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGxhc2hTY3JlZW4nKTtcclxuY29uc3Qgc3BsYXNoU2NyZWVuQ2xhc3NOYW1lID0gc3BsYXNoU2NyZWVuLmNsYXNzTGlzdFswXTtcclxuY29uc3Qgc3BsYXNoQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwbGFzaEJ1dHRvbicpO1xyXG5leHBvcnQgbGV0IHNwbGFzaFNjcmVlbkFjdGl2ZSA9IHRydWU7XHJcblxyXG5leHBvcnQgY29uc3QgaGFuZGxlU3BsYXNoU2NyZWVuID0gKCkgPT4ge1xyXG5cdHNwbGFzaFNjcmVlbi5jbGFzc0xpc3QuYWRkKGAke3NwbGFzaFNjcmVlbkNsYXNzTmFtZX0taGlkZGVuYCk7XHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRzcGxhc2hTY3JlZW4ucmVtb3ZlKCk7XHJcblx0XHRzcGxhc2hTY3JlZW5BY3RpdmUgPSBmYWxzZTtcclxuXHR9LCA0MDAwKTtcclxufTtcclxuXHJcbnNwbGFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVNwbGFzaFNjcmVlbik7IiwiLyoqXHJcbiAqIENPTlRBQ1QgRk9STSBIQU5ETEVSXHJcbiAqIEhhbmRsZXMgc3Vic2NyaWJlIGZvcm1cclxuICovXHJcblxyXG5jb25zdCBzdWJzY3JpYmVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Vic2NyaWJlQ29udGFpbmVyJyk7XHJcbmNvbnN0IHN1YnNjcmliZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJzY3JpYmVCdXR0b24nKTtcclxuY29uc3Qgc3Vic2NyaWJlT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJzY3JpYmVPdmVybGF5Jyk7XHJcblxyXG5jb25zdCBzdWJzY3JpYmVDb250YWluZXJDbGFzc05hbWUgPSBzdWJzY3JpYmVDb250YWluZXIuY2xhc3NMaXN0WzBdO1xyXG5jb25zdCBzdWJzY3JpYmVDb250YWluZXJDbGFzc05hbWVBY3RpdmUgPSBgJHtzdWJzY3JpYmVDb250YWluZXJDbGFzc05hbWV9LWFjdGl2ZWBcclxuY29uc3Qgc3Vic2NyaWJlQ29udGFpbmVyQ2xhc3NOYW1lRGlzYWJsZWQgPSBgJHtzdWJzY3JpYmVDb250YWluZXJDbGFzc05hbWV9LWRpc2FibGVkYDtcclxuXHJcbmNvbnN0IHN1YnNjcmliZUlucHV0RW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWNlLUVNQUlMJyk7XHJcblxyXG5sZXQgc3Vic2NyaWJlQWN0aXZlID0gZmFsc2U7XHJcblxyXG5mdW5jdGlvbiBvcGVuU3Vic2NyaWJlKCkge1xyXG5cdGlmKCFzdWJzY3JpYmVBY3RpdmUpIHtcclxuXHRcdHN1YnNjcmliZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKHN1YnNjcmliZUNvbnRhaW5lckNsYXNzTmFtZUFjdGl2ZSk7XHJcblx0XHRzdWJzY3JpYmVDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShzdWJzY3JpYmVDb250YWluZXJDbGFzc05hbWVEaXNhYmxlZCk7XHJcblx0XHRzdWJzY3JpYmVBY3RpdmUgPSB0cnVlO1xyXG5cdH1cclxuXHRlbHNlIHtcclxuXHRcdGNsb3NlU3Vic2NyaWJlKCk7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZVN1YnNjcmliZSgpIHtcclxuXHRzdWJzY3JpYmVDb250YWluZXIuY2xhc3NMaXN0LmFkZChzdWJzY3JpYmVDb250YWluZXJDbGFzc05hbWVEaXNhYmxlZCk7XHJcblx0c3Vic2NyaWJlQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoc3Vic2NyaWJlQ29udGFpbmVyQ2xhc3NOYW1lQWN0aXZlKTtcclxuXHRzdWJzY3JpYmVJbnB1dEVtYWlsLnZhbHVlID0gJyc7XHJcblx0c3Vic2NyaWJlQWN0aXZlID0gZmFsc2U7XHJcbn1cclxuXHJcbnN1YnNjcmliZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRvcGVuU3Vic2NyaWJlKCk7XHJcbn0pO1xyXG5cclxuc3Vic2NyaWJlT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRvcGVuU3Vic2NyaWJlKCk7XHJcbn0pO1xyXG4iXX0=
